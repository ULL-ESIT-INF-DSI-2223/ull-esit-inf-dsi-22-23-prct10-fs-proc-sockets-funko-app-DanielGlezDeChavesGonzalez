<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-danielglezdechavesgonzalez</title><meta name="description" content="Documentation for ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-danielglezdechavesgonzalez"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-danielglezdechavesgonzalez</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-danielglezdechavesgonzalez</h2></div>
<div class="tsd-panel tsd-typography"><p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-DanielGlezDeChavesGonzalez?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-DanielGlezDeChavesGonzalez/badge.svg?branch=main" alt="Coverage Status"></a></p>

<a href="#práctica-10-procesos-y-sockets" id="práctica-10-procesos-y-sockets" style="color: inherit; text-decoration: none;">
  <h1>Práctica 10: Procesos y Sockets</h1>
</a>

<a href="#descripción" id="descripción" style="color: inherit; text-decoration: none;">
  <h2>Descripción</h2>
</a>
<p>En esta práctica vamos a crear una aplicación cliente-servidor que permita a los usuarios conectarse a un servidor y realizar una serie de operaciones sobre una base de datos de Funkos Pop. La aplicación cliente-servidor se basará en el uso de sockets y procesos.</p>
<p>A su vez veremos el uso de child processes y pipes para la comunicación entre procesos. Y el funcionamiento de la pila de llamadas, el registro de eventos de la API y la cola de manejadores.</p>

<a href="#ejericio-1-colas-y-registros-de-eventos" id="ejericio-1-colas-y-registros-de-eventos" style="color: inherit; text-decoration: none;">
  <h2>Ejericio 1: Colas y registros de eventos</h2>
</a>
<p>La funcion access() comprueba si el fichero existe y si tiene permisos de lectura, en caso de que tenga muestra por pantalla un mensaje indicando que se esta observando el fichero y en caso de que no tenga permisos de lectura muestra un mensaje de error.</p>
<p>El objeto constants sirve para acceder a los valores de las constantes de modo de acceso de los ficheros, en este caso se usa la constante F_OK que comprueba si el fichero existe.</p>
<p>En el codigo anterior la traza de ejecucion para la pila de llamadas, el registro de eventos de la API y la cola de manejadores es la siguiente:</p>
<p>Primero al ejecutar el programa lo primero que entra en la pila de llamadas es 
la funcion access() que comprueba si el fichero existe y si tiene permisos de lectura, en caso de que tenga muestra por pantalla un mensaje indicando que se esta observando el fichero y en caso de que no tenga permisos de lectura muestra un mensaje de error. Posteriormente si la funcion watch.on(&quot;change&quot;) que esta atenta al archivo salta, esta se mete en la pila de llamadas luego esta se manda al registro de eventos de la API y una vez procesada se procede a mandar la funcion callback a la cola de manejadores posteriormente el event loop comprueba si hay algun manejador en la cola de manejadores y si es asi lo ejecuta y muestra por pantalla el mensaje de que el archivo ha cambiado. Y continua con la ejecucion de watch(). Luego si volvemos a ejecutar otro cambio en el archivo se vuelve a repetir el proceso anterior. Y finalmente cuando el watcher se detiene se ejecuta la funcion watch.close() que se manda al registro de eventos de la API y una vez procesada se procede a mandar la funcion callback a la cola de manejadores posteriormente el event loop comprueba si hay algun manejador en la cola de manejadores y si es asi lo ejecuta y muestra por pantalla el mensaje de que el watcher se ha detenido.</p>

<a href="#ejercicio-2-procesos-y-pipes" id="ejercicio-2-procesos-y-pipes" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 2: Procesos y pipes</h2>
</a>
<p>En este ejercicio vamos a usar el modulo spawn de child_process para crear procesos hijos y redirigir su salida a otro proceso padre.</p>

<a href="#ejercicio-21-sin-usar-pipes" id="ejercicio-21-sin-usar-pipes" style="color: inherit; text-decoration: none;">
  <h3>Ejercicio 2.1: sin usar pipes</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;wclc&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Counts the words of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;File name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">line:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Counts the lines of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">chars:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Counts the characters of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">words:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Counts the words of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">argumentos</span><span class="hl-1"> = [];</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">line</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-l&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">chars</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-m&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-w&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">words</span><span class="hl-1"> = </span><span class="hl-0">spawn</span><span class="hl-1">(</span><span class="hl-3">&quot;wc&quot;</span><span class="hl-1">, </span><span class="hl-2">argumentos</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">contadores</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">      </span><span class="hl-2">words</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">contadores</span><span class="hl-1"> = </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">().</span><span class="hl-0">split</span><span class="hl-1">(</span><span class="hl-3">&quot; &quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">contadores</span><span class="hl-1"> = </span><span class="hl-2">contadores</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">((</span><span class="hl-2">element</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-2">element</span><span class="hl-1"> != </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">            });</span><br/><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">words</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;close&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Lineas: &quot;</span><span class="hl-1"> + </span><span class="hl-2">contadores</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]);</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Palabras: &quot;</span><span class="hl-1"> + </span><span class="hl-2">contadores</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]);</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Caracteres: &quot;</span><span class="hl-1"> + </span><span class="hl-2">contadores</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">]);</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;wc command finished&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">words</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;error&quot;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">`Error: </span><span class="hl-4">${</span><span class="hl-2">err</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span>
</code></pre>
<p>En este ejercicio vamos a crear un programa que cree los procesos unicamente necesarios para poder contar las lineas, palabras y caracteres de un fichero. Para ello vamos a usar el modulo spawn de child_process. El programa recibirá como argumentos el nombre del fichero y las opciones que se quieran usar para contar las lineas, palabras y caracteres. Para leer los argumentos que se le pasan al programa vamos a usar el modulo Yargs.</p>

<a href="#ejercicio-22-usando-pipes" id="ejercicio-22-usando-pipes" style="color: inherit; text-decoration: none;">
  <h3>Ejercicio 2.2: usando pipes</h3>
</a>
<p>En este ejercicio vamos a crear un programa que cree un proceso hijo y que se comuniquen mediante pipes. El proceso padre creará un pipe y lo pasará al proceso hijo. El proceso hijo leerá de la entrada estándar y escribirá en el pipe. El proceso padre leerá del pipe y escribirá en la salida estándar. Haciendo uso de el modulo Yargs para leer desde linea de comandos los argumentos que se le pasan al programa.</p>
<pre><code class="language-typescript"><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;wclc&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Counts the words of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;File name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">line:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Counts the lines of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">chars:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Counts the characters of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">words:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Counts the words of a file&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">argumentos</span><span class="hl-1"> = [];</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">line</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-l&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">chars</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-m&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-w&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">words</span><span class="hl-1"> = </span><span class="hl-0">spawn</span><span class="hl-1">(</span><span class="hl-3">&quot;wc&quot;</span><span class="hl-1">, </span><span class="hl-2">argumentos</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">words</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-0">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">words</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;close&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;wc command finished&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">words</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;error&quot;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">`Error: </span><span class="hl-4">${</span><span class="hl-2">err</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span>
</code></pre>
<p>En el codigo anterior primero se ejecuta el programa y se le pasa como argumento el comando wclc, el nombre del fichero y las opciones que queremos que nos muestre. Luego se ejecuta la funcion spawn() que crea un proceso hijo y se le pasa como argumento el comando wc y los argumentos que queremos que nos muestre. Posteriormente se ejecuta la funcion pipe() que se encarga de conectar la salida del proceso hijo con la entrada del proceso padre. Y finalmente se ejecutan las funciones on() que se encargan de ejecutar la funcion callback cuando el proceso hijo se cierra y cuando se produce un error.</p>

<a href="#ejercicio-3-sockets" id="ejercicio-3-sockets" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 3: Sockets</h2>
</a>

<a href="#descripcion" id="descripcion" style="color: inherit; text-decoration: none;">
  <h3>Descripcion</h3>
</a>
<p>Para este ejercicio nos basaremos en la practica anterior por lo que no tocaremos nada de la parte de la clase Funko ni los diferetes tipos de datos que existan. Posteriormente crearemos dos nuevos archivos que se encargaran de crear el servidor y el cliente. Para ello usaremos el modulo net de node.js. El servidor se encargara de escuchar en el puerto 8080 y un cliente se conectara al servidor. El servidor recibira un mensaje del cliente con la peticion a ejecutar en el servidor y el servidor devolvera el resultado de la peticion al cliente. Y cerrara la conexion.</p>
<p>Cabe mencionar que el servidor y el cliente se usaran tupos de datos diferentes para poder comunicarse. El servidor recibira un tipo de dato RequestType y el cliente recibira un tipo de dato ResponseType.</p>
<pre><code class="language-typescript"><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-7">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPop</span><span class="hl-1">?: </span><span class="hl-7">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">id</span><span class="hl-1">?: </span><span class="hl-7">number</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1"> | </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">success</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPop</span><span class="hl-1">?: </span><span class="hl-7">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkolist</span><span class="hl-1">?: </span><span class="hl-7">Funko</span><span class="hl-1">[];</span><br/><span class="hl-1">};</span>
</code></pre>

<a href="#ejercicio-31-servidor" id="ejercicio-31-servidor" style="color: inherit; text-decoration: none;">
  <h3>Ejercicio 3.1: Servidor</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">server</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-0">createServer</span><span class="hl-1">((</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Client connected&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataJson</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1"> = </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">dataJson</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">app</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">App</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">cargarDatos</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">added</span><span class="hl-1"> = </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">addFunko</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">description</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">genero</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Franquicia</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Numero_franquicia</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Exclusivo</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Caracteristicas_especiales</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Precio</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">guardarDatos</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">added</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">app</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">App</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">cargarDatos</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">list</span><span class="hl-1"> = </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">listFunkos</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">funkolist:</span><span class="hl-1"> </span><span class="hl-2">list</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">app</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">App</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">cargarDatos</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">updated</span><span class="hl-1"> = </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">modifyFunko</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">description</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">genero</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Franquicia</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Numero_franquicia</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Exclusivo</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Caracteristicas_especiales</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">Precio</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">guardarDatos</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">updated</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">app</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">App</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">cargarDatos</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">removed</span><span class="hl-1"> = </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">removeFunko</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">guardarDatos</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">removed</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">app</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">App</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">cargarDatos</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">read</span><span class="hl-1"> = </span><span class="hl-2">app</span><span class="hl-1">.</span><span class="hl-0">showFunkoById</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">read</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">funkoPop:</span><span class="hl-1"> </span><span class="hl-2">read</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-7">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-0">listen</span><span class="hl-1">(</span><span class="hl-8">8080</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Server running on port 8080&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;error&quot;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">throw</span><span class="hl-1"> </span><span class="hl-2">err</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;close&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Server closed&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;end&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Client disconnected&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>
<p>El servidor recibe una conexion y una requestType en la que el cliente especificara el tipo de operacion quiera ejecutar y los datos necesarios para ejecutarla. El servidor ejecutara la operacion y devolvera un ResponseType con el resultado de la operacion. El servidor cerrara la conexion cuando se haya ejecutado la operacion.</p>

<a href="#ejercicio-32-cliente" id="ejercicio-32-cliente" style="color: inherit; text-decoration: none;">
  <h3>Ejercicio 3.2: Cliente</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-0">createConnection</span><span class="hl-1">({ </span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-8">8080</span><span class="hl-1"> }, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Connected to server!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">] === </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">      .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;Adds a funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;User name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko ID&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">nombre:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">desc:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko description&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">tipo:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko type&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">genero:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Genere of the funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">franq:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko franchise&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">num_f:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko franchise number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">exclusivo:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko exclusive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">car_e:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko special features&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">precio:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko price&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">tipo</span><span class="hl-1">: </span><span class="hl-7">Tipos</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">genero</span><span class="hl-1">: </span><span class="hl-7">Genero</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-2">tipo</span><span class="hl-1"> = </span><span class="hl-0">asignarTipo</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">tipo</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">genero</span><span class="hl-1"> = </span><span class="hl-0">asignarGenero</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genero</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">tipo</span><span class="hl-1"> === </span><span class="hl-2">Tipos</span><span class="hl-1">.</span><span class="hl-2">Error</span><span class="hl-1"> || </span><span class="hl-2">genero</span><span class="hl-1"> === </span><span class="hl-2">Genero</span><span class="hl-1">.</span><span class="hl-2">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo o genero invalido&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-5">return</span><span class="hl-1">;</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">FunkoPop</span><span class="hl-1">: </span><span class="hl-7">Funko</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">desc</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Tipo:</span><span class="hl-1"> </span><span class="hl-2">tipo</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Genero:</span><span class="hl-1"> </span><span class="hl-2">genero</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Franquicia:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">franq</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Numero_franquicia:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">num_f</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Exclusivo:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">exclusivo</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Caracteristicas_especiales:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">car_e</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Precio:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">precio</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-7">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">funkoPop:</span><span class="hl-1"> </span><span class="hl-2">FunkoPop</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;mensaje add enviado&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataJson</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">dataJson</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1"> === </span><span class="hl-4">true</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko añadido correctamente&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko no añadido&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">      .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">] === </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">      .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;Shows all the funkos of a user&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;User name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-7">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;mensaje list enviado&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataJson</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">dataJson</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">Funkos</span><span class="hl-1">: </span><span class="hl-7">Funko</span><span class="hl-1">[] = </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkolist</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funkos de &quot;</span><span class="hl-1"> + </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-3">&quot;------------------&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-2">Funkos</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-2">funko</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">color</span><span class="hl-1"> = </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">green</span><span class="hl-1">;</span><br/><span class="hl-1">              </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1"> &lt;= </span><span class="hl-8">100</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">color</span><span class="hl-1"> = </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">green</span><span class="hl-1">;</span><br/><span class="hl-1">              } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1"> &gt; </span><span class="hl-8">100</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1"> &lt;= </span><span class="hl-8">200</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">color</span><span class="hl-1"> = </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">yellow</span><span class="hl-1">;</span><br/><span class="hl-1">              } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1"> &gt; </span><span class="hl-8">200</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1"> &lt;= </span><span class="hl-8">500</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">color</span><span class="hl-1"> = </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">red</span><span class="hl-1">;</span><br/><span class="hl-1">              } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">color</span><span class="hl-1"> = </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">blue</span><span class="hl-1">;</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;ID: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Nombre: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Descripcion: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">description</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Tipo</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Genero: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Genero</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Franquicia: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Franquicia</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Numero de franquicia: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Numero_franquicia</span><span class="hl-1">)</span><br/><span class="hl-1">              );</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Exclusivo: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Exclusivo</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-0">color</span><span class="hl-1">(</span><br/><span class="hl-1">                  </span><span class="hl-3">&quot;Caracteristicas especiales: &quot;</span><span class="hl-1"> +</span><br/><span class="hl-1">                    </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Caracteristicas_especiales</span><br/><span class="hl-1">                )</span><br/><span class="hl-1">              );</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Precio: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;------------------&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">      .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">] === </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">      .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;Updates a funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;User name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko ID&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">nombre:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">desc:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko description&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">tipo:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko type&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">genero:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Genere of the funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">franq:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko franchise&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">num_f:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko franchise number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">exclusivo:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko exclusive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">car_e:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko special features&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">precio:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko price&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">tipo</span><span class="hl-1">: </span><span class="hl-7">Tipos</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">genero</span><span class="hl-1">: </span><span class="hl-7">Genero</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-2">tipo</span><span class="hl-1"> = </span><span class="hl-0">asignarTipo</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">tipo</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">genero</span><span class="hl-1"> = </span><span class="hl-0">asignarGenero</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genero</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">tipo</span><span class="hl-1"> === </span><span class="hl-2">Tipos</span><span class="hl-1">.</span><span class="hl-2">Error</span><span class="hl-1"> || </span><span class="hl-2">genero</span><span class="hl-1"> === </span><span class="hl-2">Genero</span><span class="hl-1">.</span><span class="hl-2">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo o genero invalido&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-5">return</span><span class="hl-1">;</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">FunkoPop</span><span class="hl-1">: </span><span class="hl-7">Funko</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">desc</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Tipo:</span><span class="hl-1"> </span><span class="hl-2">tipo</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Genero:</span><span class="hl-1"> </span><span class="hl-2">genero</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Franquicia:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">franq</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Numero_franquicia:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">num_f</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Exclusivo:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">exclusivo</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Caracteristicas_especiales:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">car_e</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">Precio:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">precio</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-7">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">funkoPop:</span><span class="hl-1"> </span><span class="hl-2">FunkoPop</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;mensaje update enviado&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataJson</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">dataJson</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko actualizado&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko no actualizado&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">      .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">] === </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">      .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;Shows a funko given an ID&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;User name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko ID&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-7">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;mensaje read enviado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataJson</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">dataJson</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1"> = </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">;</span><br/><span class="hl-1">              </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">color</span><span class="hl-1">: </span><span class="hl-7">chalk</span><span class="hl-1">.</span><span class="hl-7">Chalk</span><span class="hl-1"> = </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-2">grey</span><span class="hl-1">;</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;ID: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Nombre: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Descripcion: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">description</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Tipo</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Genero: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Genero</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Franquicia: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Franquicia</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Numero de franquicia: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Numero_franquicia</span><span class="hl-1">)</span><br/><span class="hl-1">              );</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Exclusivo: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Exclusivo</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-0">color</span><span class="hl-1">(</span><br/><span class="hl-1">                  </span><span class="hl-3">&quot;Caracteristicas especiales: &quot;</span><span class="hl-1"> +</span><br/><span class="hl-1">                    </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Caracteristicas_especiales</span><br/><span class="hl-1">                )</span><br/><span class="hl-1">              );</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;Precio: &quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">Precio</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">color</span><span class="hl-1">(</span><span class="hl-3">&quot;------------------&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko no encontrado&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">      .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-5">else</span><span class="hl-1"> </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">] === </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">      .</span><span class="hl-0">command</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;Removes a funko given an ID&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;User name&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Funko ID&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-7">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">&quot;mensaje remove enviado&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">          </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataJson</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">dataJson</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko eliminado&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            } </span><span class="hl-5">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko no eliminado&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">      .</span><span class="hl-0">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code></pre>
<p>El cliente se conecta al servidor y envía un mensaje de tipo <code>RequestType</code> que contiene el tipo de operación que se quiere realizar, el usuario que la realiza y los datos necesarios para realizarla todo esto obtenido a traves de linea de comandos usando el modulo yargs. El servidor recibe el mensaje y lo procesa, si todo sale bien el servidor responde con un mensaje de tipo <code>ResponseType</code> que contiene un booleano que indica si la operación fue exitosa y en caso de serlo el objeto <code>Funko</code> que se ha creado, actualizado, eliminado o leído. El cliente recibe el mensaje y lo procesa, si todo sale bien el cliente muestra por consola los datos del objeto <code>Funko</code> que se ha creado, actualizado, eliminado o leído.</p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h2>Conclusiones</h2>
</a>
<p>En este proyecto hemos aprendido a usar sockets para establecer conexiones entre un cliente y un servidor, de manera que el cliente pueda enviar mensajes al servidor y el servidor pueda responder a esos mensajes. Ademas hemos aprendido a usar el modulo child_process para ejecutar comandos de la terminal desde un programa de nodejs. Y finalmetne tambien destacar que hemos aprendido como funciona la pila de llamadas, el registro de eventos de la API y la cola de manejadores,</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">ull-<wbr/>esit-<wbr/>inf-<wbr/>dsi-<wbr/>22-<wbr/>23-<wbr/>prct10-<wbr/>fs-<wbr/>proc-<wbr/>sockets-<wbr/>funko-<wbr/>app-<wbr/>danielglezdechavesgonzalez</a>
<ul>
<li class="tsd-kind-module"><a href="modules/FunkoApp.html">Funko<wbr/>App</a></li>
<li class="tsd-kind-module"><a href="modules/FunkoApp-1.html">Funko<wbr/>App</a></li>
<li class="tsd-kind-module"><a href="modules/datatype_Funko.html">datatype/<wbr/>Funko</a></li>
<li class="tsd-kind-module"><a href="modules/datatype_Tipos.html">datatype/<wbr/>Tipos</a></li>
<li class="tsd-kind-module"><a href="modules/index_client.html">index_<wbr/>client</a></li>
<li class="tsd-kind-module"><a href="modules/index_client-1.html">index_<wbr/>client</a></li>
<li class="tsd-kind-module"><a href="modules/index_server.html">index_<wbr/>server</a></li>
<li class="tsd-kind-module"><a href="modules/index_server-1.html">index_<wbr/>server</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>